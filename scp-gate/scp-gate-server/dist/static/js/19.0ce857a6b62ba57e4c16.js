webpackJsonp([19],{"+6Bu":function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t){var a={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(a[i]=e[i]);return a}},"4L63":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),l=a.n(i),r=a("+6Bu"),n=a.n(r),c=a("vLgD");var d=a("yBzI"),s=a("NYxO"),o={watch:{filterText:function(e){this.$refs.dictTypeTree.filter(e)}},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleClick:function(e){this.dictValueDialogVisible=!0;var t=n()(e,[]);this.dictValueForm=t,this.dictValueForm.code.indexOf(this.currentDictType.code)>-1&&(this.dictValueForm.code=this.dictValueForm.code.substring(this.currentDictType.code.length+1,this.dictValueForm.code.length))},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除字典值, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(d.b)(e.id).then(function(){t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3});var a=t.dictValueTableData.indexOf(e);t.dictValueTableData.splice(a,1)})})},handleDictValueFilter:function(){var e=this;this.listDictValueQuery.typeId=this.currentDictTypeId,Object(d.d)(this.listDictValueQuery).then(function(t){e.dictValueTableData=t.data.rows})},handleDictValueSave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;void 0!==t.dictValueForm.id?(t.dictValueForm.value=t.dictValueForm.code,t.dictValueForm.code=t.currentDictType.code+"_"+t.dictValueForm.code,Object(d.e)(t.dictValueForm.id,t.dictValueForm).then(function(){t.editDictTypeFlag=!1,t.handleDictValueFilter(),t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.dictValueDialogVisible=!1})):(t.dictValueForm.value=t.dictValueForm.code,t.dictValueForm.code=t.currentDictType.code+"_"+t.dictValueForm.code,t.dictValueForm.typeId=t.currentDictTypeId,Object(d.a)(t.dictValueForm).then(function(){t.editDictTypeFlag=!1,t.handleDictValueFilter(),t.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),t.dictValueDialogVisible=!1}))})},handleDictValueCreate:function(){void 0===this.currentDictTypeId?this.$notify({title:"失败",message:"请先选择字典目录",type:"warning",duration:2e3}):(this.dictValueDialogVisible=!0,this.resetDictValueForm())},handleDictValueCancel:function(){this.dictValueDialogVisible=!1,this.resetDictValueForm()},handlerDictTypeForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a,i;(a=t.dictTypeForm.id,i=t.dictTypeForm,Object(c.a)({url:"/api/dict/dictType/"+a,method:"put",data:i})).then(function(){t.editDictTypeFlag=!1,t.initTreeData(),t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3})})})},append:function(e,t){var a,i=this,l={};(a={name:"子节点",code:t.code+"_tmp",parentId:t.id},Object(c.a)({url:"/api/dict/dictType",method:"post",data:a})).then(function(e){var a={id:(l=e.data).id,label:l.name,children:[]};t.children||i.$set(t,"children",[]),t.children.push(a)}),this.$refs.dictTypeTree.setCurrentKey(t.id)},remove:function(e,t){var a=this;if(t.children.length>0)this.$notify({title:"失败",message:"删除失败，该项有子孙节点！",type:"warning",duration:2e3});else{var i={typeId:this.currentDictTypeId};Object(d.d)(i).then(function(i){var l;(a.dictValueTableData=i.data.rows,a.dictValueTableData.length>0)?a.$notify({title:"失败",message:"删除失败，该项有字典值！",type:"warning",duration:2e3}):((l=t.id,Object(c.a)({url:"/api/dict/dictType/"+l,method:"delete"})).then(function(){a.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3});var i=e.parent,l=i.data.children||i.data,r=l.findIndex(function(e){return e.id===t.id});l.splice(r,1)}),a.$refs.dictTypeTree.setCurrentKey(t.id))})}},edit:function(e,t){var a,i=this;this.editDictTypeFlag=!0,this.currentDictTypeId=t.id,this.currentDictType=t,(a=t.id,Object(c.a)({url:"/api/dict/dictType/"+a,method:"get"})).then(function(e){i.dictTypeForm=e.data}),this.$refs.dictTypeTree.setCurrentKey(t.id)},resetDictTypeForm:function(){this.dictTypeForm={code:"",name:""}},resetDictValueForm:function(){this.dictValueForm={code:void 0,labelDefault:void 0,labelEnUs:void 0,labelZhCh:void 0,value:void 0}},renderContent:function(e,t){var a=this,i=t.node,l=t.data;return e("span",{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;"},[e("span",[e("span",[i.label])]),e("span",[this.dictTypeManager_btn_edit?e("el-button",{style:"font-size: 12px;",attrs:{type:"text"},on:{click:function(){return a.edit(i,l)}}},[e("i",{class:"el-icon-edit"})]):e("span"),this.dictTypeManager_btn_add?e("el-button",{style:"font-size: 12px;",attrs:{type:"text"},on:{click:function(){return a.append(i,l)}}},[e("i",{class:"el-icon-circle-plus-outline"})]):e("span"),this.dictTypeManager_btn_del?e("el-button",{style:"font-size: 12px;",attrs:{type:"text"},on:{click:function(){return a.remove(i,l)}}},[e("i",{class:"el-icon-delete"})]):e("span")])])},initTreeData:function(){var e=this;Object(c.a)({url:"/api/dict/dictType/tree",method:"get"}).then(function(t){e.dictTypeData=t})},getNodeData:function(e){var t=this;this.currentDictTypeId=e.id,this.currentDictType=e;var a={typeId:this.currentDictTypeId};Object(d.d)(a).then(function(e){t.dictValueTableData=e.data.rows})}},created:function(){this.initTreeData(),this.dictTypeManager_btn_edit=this.elements["dictTypeManager:btn_edit"],this.dictTypeManager_btn_del=this.elements["dictTypeManager:btn_del"],this.dictTypeManager_btn_add=this.elements["dictTypeManager:btn_add"],this.dictValueManager_btn_edit=this.elements["dictValueManager:btn_edit"],this.dictValueManager_btn_del=this.elements["dictValueManager:btn_del"],this.dictValueManager_btn_add=this.elements["dictValueManager:btn_add"]},computed:l()({},Object(s.b)(["elements"])),data:function(){return{dictValueManager_btn_edit:!1,dictValueManager_btn_del:!1,dictValueManager_btn_add:!1,dictTypeManager_btn_edit:!1,dictTypeManager_btn_del:!1,dictTypeManager_btn_add:!1,filterText:"",dictValueDialogVisible:!1,editDictTypeFlag:!1,currentDictTypeId:void 0,currentDictType:{},dictTypeForm:{code:"",name:""},listDictValueQuery:{labelDefault:void 0,typeId:void 0},dictValueForm:{code:void 0,labelDefault:void 0,labelEnUs:void 0,labelZhCh:void 0,value:void 0},dictValueFormRules:{code:[{required:!0,message:"请输入编码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],labelDefault:[{required:!0,message:"请输入默认显示",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],labelEnUs:[{required:!0,message:"请输入英文显示",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],labelZhCh:[{required:!0,message:"请输入中文显示",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]},dictTypeFormRules:{code:[{required:!0,message:"请输入编码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入目录名",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]},dictTypeData:[],defaultProps:{children:"children",label:"label"},dictValueTableData:[]}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container calendar-list-container"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{"margin-right":"10px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("字典目录")])]),e._v(" "),a("div",[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"dictTypeTree",staticClass:"filter-tree",attrs:{"node-key":"id",data:e.dictTypeData,props:e.defaultProps,"default-expand-all":"","expand-on-click-node":!1,"filter-node-method":e.filterNode,"highlight-current":"","render-content":e.renderContent},on:{"node-click":e.getNodeData}})],1)])],1)]),e._v(" "),a("el-col",{staticStyle:{height:"100%"},attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[e.editDictTypeFlag?e._e():a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("字典值")])]),e._v(" "),a("div",[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"标签或code"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleDictValueFilter(t)}},model:{value:e.listDictValueQuery.labelDefault,callback:function(t){e.$set(e.listDictValueQuery,"labelDefault",t)},expression:"listDictValueQuery.labelDefault"}}),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:e.handleDictValueFilter}},[e._v("搜索")]),e._v(" "),this.dictValueManager_btn_add?a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleDictValueCreate}},[e._v("添加")]):e._e()],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dictValueTableData,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.dictValueManager_btn_edit?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleClick(t.row)}}},[a("i",{staticClass:"el-icon-edit"})]):e._e(),e._v(" "),e.dictValueManager_btn_del?a("el-button",{staticStyle:{color:"red"},attrs:{size:"small",type:"text"},on:{click:function(a){e.handleDelete(t.row)}}},[a("i",{staticClass:"el-icon-delete"})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200px",align:"center",label:"编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.code))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100px",align:"center",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.value))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100px",align:"center",label:"默认显示"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.labelDefault))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100px",align:"center",label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderNum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200px",align:"center",label:"英文显示"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.labelEnUs))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200px",align:"center",label:"中文显示"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.labelZhCh))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200px",align:"center",label:"最后更新人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.updUserName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200px",align:"center",label:"最后更新人ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.updUserId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200px",align:"center",label:"最后更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.updTime))])]}}])})],1)],1)]),e._v(" "),e.editDictTypeFlag?a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("字典目录编辑")])]),e._v(" "),a("div",[a("el-form",{ref:"dictTypeForm",staticClass:"demo-ruleForm",attrs:{model:e.dictTypeForm,"status-icon":"",rules:e.dictTypeFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入编码"},model:{value:e.dictTypeForm.code,callback:function(t){e.$set(e.dictTypeForm,"code",t)},expression:"dictTypeForm.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"目录名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入目录名"},model:{value:e.dictTypeForm.name,callback:function(t){e.$set(e.dictTypeForm,"name",t)},expression:"dictTypeForm.name"}})],1),e._v(" "),a("el-form-item",[this.dictTypeManager_btn_edit?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handlerDictTypeForm("dictTypeForm")}}},[e._v("提交")]):e._e(),e._v(" "),a("el-button",{on:{click:function(t){e.editDictTypeFlag=!1}}},[e._v("取消")])],1)],1)],1)]):e._e()],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dictValueDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.dictValueDialogVisible=t}}},[a("el-form",{ref:"dictValueForm",attrs:{model:e.dictValueForm,rules:e.dictValueFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"编码值",prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入值"},model:{value:e.dictValueForm.code,callback:function(t){e.$set(e.dictValueForm,"code",t)},expression:"dictValueForm.code"}},[a("template",{slot:"prepend"},[e._v(e._s(e.currentDictType.code+"_"))])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"默认显示",prop:"labelDefault"}},[a("el-input",{attrs:{placeholder:"请输入默认显示"},model:{value:e.dictValueForm.labelDefault,callback:function(t){e.$set(e.dictValueForm,"labelDefault",t)},expression:"dictValueForm.labelDefault"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"英文显示",prop:"labelEnUs"}},[a("el-input",{attrs:{placeholder:"请输入英文显示"},model:{value:e.dictValueForm.labelEnUs,callback:function(t){e.$set(e.dictValueForm,"labelEnUs",t)},expression:"dictValueForm.labelEnUs"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中文显示",prop:"labelZhCh"}},[a("el-input",{attrs:{placeholder:"请输入中文显示"},model:{value:e.dictValueForm.labelZhCh,callback:function(t){e.$set(e.dictValueForm,"labelZhCh",t)},expression:"dictValueForm.labelZhCh"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"orderNum"}},[a("el-input",{attrs:{placeholder:"请输入排序"},model:{value:e.dictValueForm.orderNum,callback:function(t){e.$set(e.dictValueForm,"orderNum",t)},expression:"dictValueForm.orderNum"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleDictValueCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleDictValueSave("dictValueForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},p=a("VU/8")(o,u,!1,null,null,null);t.default=p.exports}});